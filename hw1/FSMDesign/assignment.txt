design a finite state machine runnable in c++ 